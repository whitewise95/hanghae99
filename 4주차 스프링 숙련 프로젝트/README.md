# #í”„ë¡œì íŠ¸ ì†Œê°œ [ë‹¤ìš´ë¡œë“œë§í¬](https://drive.google.com/file/d/12vV45ZiK4d7q9ipw7qiQkwEjneGA4mhf/view?usp=sharing)

ìŠ¤í”„ë§ ì…ë¬¸ í”„ë¡œì íŠ¸ " [MyBlog](https://github.com/whitewise95/voyage99/tree/main/3%EC%A3%BC%EC%B0%A8%20%EC%8A%A4%ED%94%84%EB%A7%81%20%EC%9E%85%EB%AC%B8%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8) " ì—ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ JWTë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì›ê´€ë¦¬ ë° ë¡œê·¸ì¸ ìœ ì§€ì™€ ëŒ“ê¸€CRUDë„ ê°€ëŠ¥í•˜ê²Œ develop í•˜ëŠ” í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤. [MyBlog](https://github.com/whitewise95/voyage99/tree/main/3%EC%A3%BC%EC%B0%A8%20%EC%8A%A4%ED%94%84%EB%A7%81%20%EC%9E%85%EB%AC%B8%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8)  ë§í¬ë¥¼ íƒ€ì‹œë©´ ì €ë²ˆ ì£¼ì°¨ì— ì–´ë–»ê²Œ í–ˆëŠ”ì§€ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  

# #ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ë°°ìš´ì  ë° ì•Œê²Œëœ ì 
> ë§í¬ë¥¼ íƒ€ê³  ë“¤ì–´ê°€ë©´ ì •ë¦¬í•´ë‘” ë‚´ìš©ì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. [ìŠ¤í”„ë§ ì‹œíë¦¬í‹°](https://github.com/whitewise95/TIL/blob/main/Java/Spring/SpringSecurity/SpringSecurity(%EC%8A%A4%ED%94%84%EB%A7%81%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0).md)ì™€ [ì¸ì¦ê³¼ ì¸ê°€](https://github.com/whitewise95/TIL/blob/main/Security/%EC%9D%B8%EC%A6%9D%EA%B3%BC%20%EC%9D%B8%EA%B0%80.md)ì—  ëŒ€í•´ì„œë„ ì•Œê²Œë˜ì—ˆë‹¤. ê¸°ì¡´ì— " [ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ ë”°ë¼í•˜ê¸°](https://github.com/whitewise95/JPA_JUnitTest_Gradle_Oauth2_Practice) " ë¼ëŠ” ì±… ë”°ë¼ì„œ í•œë²ˆ êµ¬í˜„ í•´ë³¸ì ì´ ìˆì§€ë§Œ ì´ë ‡ê²Œ ê¹Šì´ ê³µë¶€ê¹Œì§€ ëª»í–ˆê³  ë‚˜ì˜ ê¸°ì¡´ ì„œë¹„ìŠ¤ì— ì ìš©í•´ë³´ê³  ë‚œ ì—ëŸ¬ë“¤ì„ ëˆˆìœ¼ë¡œ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

```
  ì²«ë²ˆì§¸ - ê¸°ì¡´ì˜ ìš°ë¶„íˆ¬í™˜ê²½ì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ëŠ” ë¡œì§ë„ png íŒŒì¼ì´ ê¹¨ì ¸ì„œ í‘œì‹œë˜ì—ˆë‹¤ ì´ëŸ° ì‚¬ì†Œí•œ ë¶€ë¶„ê¹Œì§€
          ì‹œíë¦¬í‹°ì—ì„œ ì¸ê°€ì™€ ì¸ì¦ì„ ì„¤ì • í•´ì¤˜ì•¼í•œë‹¤.
          
  ë‘ë²ˆì§¸ - ëª¨ë“  APIì— ëŒ€í•œ ì¸ê°€ì™€ ì¸ì¦ê´€ë¦¬ë¥¼ í•´ì¤˜ì•¼í•œë‹¤.
```  

2. [ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´ìš©í•œ JWT](https://github.com/whitewise95/TIL/blob/main/Java/Spring/SpringSecurity/JWT%20%EC%99%80%20Security%20%EC%84%A4%EC%A0%95.md)ë¥¼ ì•Œê²Œ ë˜ì—ˆë‹¤. ì§€ê¸ˆê¹Œì§€ JWTëŠ” ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¤„ ì•Œì•˜ëŠ”ë° Filter Chainì— í¬í•¨ì‹œí‚¬ Filterë¥¼ ë§Œë“¤ì–´ ì¸ê°€ì™€ ì¸ì¦ì„ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤.  

3. Ajaxì— í—¤ë”ì— ë°ì´í„°ë¥¼ íƒœì›Œ í†µì‹ í•˜ëŠ” ë²•ì„ ì•Œê²Œë˜ì—ˆë‹¤. í† í°ì„ í—¤ë” ë‹´ì•„ ì„œë²„ì—ì„œ ë°›ëŠ”ë° Ajax ê¸°ë³¸ì ì´ í†µì‹ ë§Œ í•´ë³´ì•˜ì§€ í—¤ë”ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ëŠ”ê±¸ ì•Œê²Œë˜ì—ˆë‹¤.  

# #ë³´ì•ˆí•  ì  ë° ë¬¸ì œí•´ê²°í•œ ë¶€ë¶„

### RestFulí•˜ê²Œ APIì„¤ê³„
RestFulí•˜ê²Œ APIì„¤ê³„í•˜ê³  ì‹¶ì–´ì„œ ëŠë¦¬ë”ë¼ë„ ì²œì²œíˆ í”„ë¡œê·¸ë˜ë°ì„ í–ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ ëë‚˜ê³  ìƒê°í•´ë³´ë‹ˆ ê³„ì¸µêµ¬ë„ë¡œ URIë¥¼ ì˜ëª» ì„¤ê³„í•œ ëŠë‚Œì´ë‹¤. ë³´ì•ˆì„ í•˜ê³ ì‹¶ë‹¤.  
<br>
í˜„ì¬ ê¸°ìˆ ë§¤ë‹ˆì €ë‹˜ê»˜ "ë°ì´í„°ë¥¼ ì“°ì§€ ì•Šì•˜ë„ ì•„ë˜ ë³´ì•ˆí•  ë¶€ë¶„ì²˜ëŸ¼ ê¸€ IDë¥¼ ë³´ë‚´ì•¼í•˜ë‚˜ìš”?" ë¼ê³  ì§ˆë¬¸ì„ ë‚¨ê²¼ëŠ”ë° ë‹µë³€ì„ ê¸°ë‹¤ë¦¬ê³ ìˆë‹¤.
```
í˜„ì¬ uri êµ¬ì„±
/comment/{ëŒ“ê¸€ID}

ë³´ì•ˆí•˜ê³ ì‹¶ì€ ë¶€ë¶„
/comment/{ê¸€ID}/{ëŒ“ê¸€ID}
```

### dependensy ë²„ì „ ë¬¸ì œ?!
ê¸°ì¡´ì— JWT ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ 'com.auth0:java-jwt:3.13.0' ë¥¼ ì¨ì„œ JWTë¥¼ êµ¬í˜„í–ˆëŠ”ë° ìš°ë¶„íˆ¬í™˜ê²½ì— ë°°í¬í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì—ëŸ¬ê°€ ë‚¬ë‹¤.  
<br>
ë‚˜ì™€ ê°™ì€ ë¬¸ì œë¥¼ ê²ªëŠ” ì‚¬ëŒì€ ì•„ì§ ë‚˜ì˜ ì„œì¹˜ëŠ¥ë ¥ìœ¼ë¡  ëª»ì°¾ì•˜ì§€ë§Œ group: 'io.jsonwebtoken', name: 'jjwt', version: '0.9.1' ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ  
ë³€ê²½í•˜ì—¬ JWTë¶€ë¶„ì„ ë‹¤ì‹œ êµ¬í˜„í•˜ì˜€ë‹¤.
```
Caused by: java.lang.ClassNotFoundException: com.auth0.jwt.interfaces.JWTVerifier
```





# # ì¶”ê°€ëœ APIëª…ì„¸  

### ğŸ“ íšŒì›ê´€ë¦¬ API  

| ê¸°ëŠ¥   | method | url           | request | response |
|------|--------|---------------|---------|----------|
| íšŒì›ê°€ì… | POST   | /user/signup  | íƒ€ì…1     | íƒ€ì…3      |
| ë¡œê·¸ì¸  | POST   | /user         | íƒ€ì…2     | íƒ€ì…3      |  

```JSON
â­ï¸ íƒ€ì…1

{
  "usernaem" : " ",
  "password" : " ",
  "passwordCheck" : " ",
  "email" : " "
}
```  

```JSON
â­ï¸ íƒ€ì…2

{
  "usernaem" : " ",
  "password" : " "
}
```  

```JSON
â­ï¸ íƒ€ì…3

{
  "id" : 
  "content" : ""
  "password" : ""
  "imgUrl" : ""
  "writer" : ""
  "createDate" : ""
  "ModifiedDate" : ""
}
```


### ğŸ“ ëŒ“ê¸€CURD API  

| ê¸°ëŠ¥    | method | url                   | request | response |
|-------|--------|-----------------------|---------|----------|
| ëŒ“ê¸€ ì¡°íšŒ | GET    | /comment/{blogId}     |         | íƒ€ì…5      |
| ëŒ“ê¸€ ì“°ê¸° | POST   | /comment/{blogId}     | íƒ€ì…4     | íƒ€ì…6      |
| ëŒ“ê¸€ ì‚­ì œ | DELETE | /comment/{commentId}  | íƒ€ì…4     | íƒ€ì…6      |
| ëŒ“ê¸€ ìˆ˜ì • | PUT    | /comment/{commentId}  | íƒ€ì…4     | íƒ€ì…6      |

```JSON
â­ï¸ íƒ€ì…4

Header =  Authorization : "í† í°"

{
  "comment" : "sadasd222"
}
```

```JSON
â­ï¸ íƒ€ì…5
{
    "createDate": "2022.06.03 11:22:43",
    "modifiedDate": "2022.06.03 11:22:43",
    "id": 4,
    "comment": "214512412",
    "blogId": 1,
    "userId": "admin"
}
```  
```JSON
â­ï¸ íƒ€ì…6
    
{
  "statusCode": 200 ë˜ëŠ” 500,
  "message": "ë©”ì„¸ì§€"
}
```

# #ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì‚¬ìš©í•´ íšŒì›ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ìˆœì„œë„ë¡œ 

### ğŸ“ íšŒì›ê°€ì… ìˆœì„œë„  
![success Handler (2)](https://user-images.githubusercontent.com/81284265/171804120-62c32569-1d77-4f6e-8ba7-5249de8f0a14.png)  

### ğŸ“ ë¡œê·¸ì¸ ìˆœì„œë„
![success Handler (1)](https://user-images.githubusercontent.com/81284265/171804126-ad4d6207-18c5-49a8-b97f-cc33d9307741.png)

### ğŸ“ í† í°ìœ¼ë¡œ ë¡œê·¸ì¸ìœ ì§€ ìˆœì„œë„
![success Handler](https://user-images.githubusercontent.com/81284265/171804128-b8254796-4f4c-4fd6-a9e5-27e482a47771.png)





# #ì¶”ê°€ëœ UI  

### ğŸ“ ë¡œê·¸ì¸í™”ë©´  
![ë¡œê·¸ì¸í™”ë©´](https://user-images.githubusercontent.com/81284265/171799772-09e29d2b-0b20-4fff-acb8-5f645c7bfe99.png)  
### ğŸ“ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼  
![ë¡œê·¸ì•„ì›ƒ](https://user-images.githubusercontent.com/81284265/171799777-852d9a82-9a36-4b64-8cdd-2094599360a8.png)  
### ğŸ“ ëŒ“ê¸€ ëª¨ë‹¬ ì—´ê¸° ê°€ëŠ¥  
![í™”ë©´ ìº¡ì²˜ 2022-06-03 145403](https://user-images.githubusercontent.com/81284265/171799776-4a082174-8440-4c40-863f-63cb8c4e8cec.png)  
### ğŸ“ ëŒ“ê¸€CURD  
![ëŒ“ê¸€ë‚¨ê¸°ê¸°](https://user-images.githubusercontent.com/81284265/171799800-21b372b8-db04-4f7a-aa01-6d24cbf4ab05.png)  

# #ì‹œíë¦¬í‹° ì™€ JWT ë¡œì§ì„ ìœ„í•œ ìƒì„±ëœ êµ¬ì¡°
```
í”„ë¡œì íŠ¸\SRC\MAIN\JAVA\COM\SPARTA_SPRING\SPARTA_SPRING3\SECURITY
â”‚  FilterSkipMatcher.java
â”‚  FormLoginSuccessHandler.java
â”‚  UserDetailsImpl.java
â”‚  UserDetailsServiceImpl.java
â”‚  WebSecurityConfig.java
â”‚
â”œâ”€filter
â”‚      FormLoginFilter.java
â”‚      JwtAuthFilter.java
â”‚
â”œâ”€jwt
â”‚      HeaderTokenExtractor.java
â”‚      JwtDecoder.java
â”‚      JwtPreProcessingToken.java
â”‚      JwtTokenUtils.java
â”‚
â””â”€provider
        FormLoginAuthProvider.java
        JWTAuthProvider.java

```



